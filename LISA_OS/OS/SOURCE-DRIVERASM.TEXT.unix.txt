
        .PROC   DRIVERASM  ;CALLS INTO DRIVER-OS JUMPTABLE

;       By Dave Offen.
;       Copyright 1983, 1984, Apple Computer Inc.


DRIVRJT .EQU    $210     ;ADDRESS OF DRIVER'S JUMP TABLE INTO OS

        .DEF    CANCEL_REQ,ENQUEUE,DEQUEUE,RELSPACE,GETSPACE,SYSTEM_ERROR,TRACE
        .DEF    MACH_INFO,UNBLK_REQ,BLK_REQ,IODONE,FREEZE_SEG,UNFREEZE_SEG
        .DEF    ADJ_IO_CNT,CVT_BUFF_ADDR,CALLDRIVER,INTSOFF,INTSON,ALLSET
        .DEF    LOG,LOGGING,CHAIN_FORWARD,DISKSYNC,MICROTIMER,ALARM_ASSIGN
        .DEF    ALARMRETURN,ALARMRELATIVE,ALARMOFF,LINK_TO_PCB,USE_HDISK
        .DEF    CALL_HDISK,OKXFERNEXT,KEYPUSHED
        .DEF    %I_MUL4,%I_DIV4,%I_MOD4

        .REF    DRIVER

        JMP     DRIVER  ;BRANCH TO START OF DRIVER SUBROUTINE
                        ;DRIVERASM.OBJ MUST BE LINKED BEFORE ANY OF THE DRIVER CODE

CANCEL_REQ
        MOVE.L  DRIVRJT,A0
        JMP     0(A0)

ENQUEUE MOVE.L  DRIVRJT,A0
        JMP     6(A0)

DEQUEUE MOVE.L  DRIVRJT,A0
        JMP     12(A0)

RELSPACE
        MOVE.L  DRIVRJT,A0
        JMP     18(A0)

GETSPACE
        MOVE.L  DRIVRJT,A0
        JMP     24(A0)

SYSTEM_ERROR
        MOVE.L  DRIVRJT,A0
        JMP     30(A0)

TRACE   MOVE.L  DRIVRJT,A0
        JMP     36(A0)

MACH_INFO
        MOVE.L  DRIVRJT,A0
        JMP     42(A0)

UNBLK_REQ
        MOVE.L  DRIVRJT,A0
        JMP     48(A0)

BLK_REQ MOVE.L  DRIVRJT,A0
        JMP     54(A0)

IODONE  MOVE.L  DRIVRJT,A0
        JMP     60(A0)

FREEZE_SEG
        MOVE.L  DRIVRJT,A0
        JMP     66(A0)

UNFREEZE_SEG
        MOVE.L  DRIVRJT,A0
        JMP     72(A0)

ADJ_IO_CNT
        MOVE.L  DRIVRJT,A0
        JMP     78(A0)

CVT_BUFF_ADDR
        MOVE.L  DRIVRJT,A0
        JMP     84(A0)

CALLDRIVER
        MOVE.L  DRIVRJT,A0
        JMP     90(A0)

INTSOFF MOVE.L  DRIVRJT,A0
        JMP     96(A0)

INTSON  MOVE.L  DRIVRJT,A0
        JMP     102(A0)

ALLSET  MOVE.L  DRIVRJT,A0
        JMP     108(A0)

LOG     MOVE.L  DRIVRJT,A0
        JMP     114(A0)

LOGGING MOVE.L  DRIVRJT,A0
        JMP     120(A0)

CHAIN_FORWARD
        MOVE.L  DRIVRJT,A0
        JMP     126(A0)

DISKSYNC
        MOVE.L  DRIVRJT,A0
        JMP     132(A0)

MICROTIMER
        MOVE.L  DRIVRJT,A0
        JMP     138(A0)

ALARM_ASSIGN
        MOVE.L  DRIVRJT,A0
        JMP     144(A0)

ALARMRETURN
        MOVE.L  DRIVRJT,A0
        JMP     150(A0)

ALARMRELATIVE
        MOVE.L  DRIVRJT,A0
        JMP     156(A0)

ALARMOFF
        MOVE.L  DRIVRJT,A0
        JMP     162(A0)

LINK_TO_PCB
        MOVE.L  DRIVRJT,A0
        JMP     168(A0)

USE_HDISK
        MOVE.L  DRIVRJT,A0
        JMP     174(A0)

CALL_HDISK
        MOVE.L  DRIVRJT,A0
        JMP     180(A0)

OKXFERNEXT
        MOVE.L  DRIVRJT,A0
        JMP     186(A0)

KEYPUSHED
        MOVE.L  DRIVRJT,A0
        JMP     192(A0)

        ;NOT USED YET!

%I_MUL4 MOVE.L  DRIVRJT,-(SP)   ;CALL WITHOUT USING A0
        ADDI.L  #198,(SP)
        RTS

%I_DIV4 MOVE.L  DRIVRJT,-(SP)   ;CALL WITHOUT USING A0
        ADDI.L  #204,(SP)
        RTS

%I_MOD4 MOVE.L  DRIVRJT,-(SP)   ;CALL WITHOUT USING A0
        ADDI.L  #210,(SP)
        RTS

        .END


ÿ