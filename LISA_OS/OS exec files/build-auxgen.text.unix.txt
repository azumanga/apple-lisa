$EXEC                         {AUXGEN: Build libraries and several programs}

F{ilemgr}
{start from scratch object volume:}
D{elete}object/=                                                 {continue blanks}
                                     {plenty of blanks for FULL delete acceptance}
                                                                           Y{doit}

C{opy}build/osdefs.text,source/paslibdefs.text
Y{es, replace it}C{opy}build/oiupaslib.obj,object/oiupaslib.obj
YCbuild/system.lld,object/system.lld
YCbuild/hwint.obj,object/hwint.obj
YCbuild/hwintl.obj,object/hwintl.obj
YCbuild/system.debug,object/system.debug
YCbuild/system.debug2,object/system.debug2
YQ{uit filemgr}

$SUBMIT build/assemb(source/pasmath,object/pasmath)
$SUBMIT build/assemb(source/pasmem,object/pasmem)
$SUBMIT build/assemb(source/pastext,object/pastext)
$SUBMIT build/assemb(source/pasmisc,object/pasmisc)
$SUBMIT build/assemb(source/pasmove,object/pasmove)
$SUBMIT build/assemb(source/pasrange,object/pasrange)
$SUBMIT build/assemb(source/passcomp,object/passcomp)
$SUBMIT build/assemb(source/passet,object/passet)
$SUBMIT build/assemb(source/pasterm,object/pasterm)
$SUBMIT build/assemb(source/pastring,object/pastring)
$SUBMIT build/assemb(source/pasio,object/pasio)
$SUBMIT build/assemb(source/pasinit,object/pasinit)

{    *** WORKAROUND FOLLOWS ***
 HERE IS WHERE WE NEED TO RUN THE 'LIBRARY' TO MAKE osintpaslib, BUT
 NOT KNOWING HOW TO DO THAT, COPY A PREVIOUS VERSION OF IT:}
$WRITELN 'WARNING: OSINTPASLIB not re-generated, but copied from BUILD/'
F{ilemgr}C{opy}build/osintpaslib.obj,object/osintpaslib.obj
Y{es, replace it}Q{uit Filemgr}

{switch to mode of building application paslib objects:}
F{ilemgr}C{opy}build/apdefs.text,source/paslibdefs.text
YQ{uit Filemgr}

$SUBMIT build/assemb(source/oslib,object/oslib)
$SUBMIT build/assemb(source/poslib,object/poslib)
$SUBMIT build/assemb(source/pasmisc,object/appasmisc)
$SUBMIT build/assemb(source/pasterm,object/appasterm)
$SUBMIT build/assemb(source/pasio,object/appasio)
$SUBMIT build/assemb(source/appastext,object/appastext)
$SUBMIT build/assemb(source/initfp,object/initfp)
$SUBMIT build/assemb(source/tfldercall,object/tfldercall)
$SUBMIT build/assemb(source/pasmem,object/appasmem)
$SUBMIT build/assemb(source/pasinit,object/appasinit)

{    *** WORKAROUND FOLLOWS ***
 HERE IS WHERE WE NEED TO RUN THE 'LIBRARY' TO MAKE sospaslib, BUT
 NOT KNOWING HOW TO DO THAT, COPY A PREVIOUS VERSION OF IT:}
$WRITELN 'WARNING: SOSPASLIB not re-generated, but copied from BUILD/'
F{ilemgr}C{opy}build/sospaslib.obj,object/sospaslib.obj
Y{es, replace it}Q{uit Filemgr}

{    *** WORKAROUND FOLLOWS ***
 HERE IS WHERE WE NEED TO RUN THE 'LIBRARY' TO MAKE sospasiolib, BUT
 NOT KNOWING HOW TO DO THAT, COPY A PREVIOUS VERSION OF IT:}
$WRITELN 'WARNING: SOSPASIOLIB not re-generated, but copied from BUILD/'
F{ilemgr}C{opy}build/sospasiolib.obj,object/sospasiolib.obj
Y{es, replace it}Q{uit Filemgr}

$SUBMIT build/comp(source/syscall,object/syscall)
$SUBMIT build/comp(source/psyscall,object/psyscall)
$SUBMIT build/comp(source/blkiointr,object/blkiointr)
$SUBMIT build/comp(source/blockio,object/blockio)
$SUBMIT build/comp(source/pasheap,object/pasheap)

{    *** WORKAROUND FOLLOWS ***
 HERE IS WHERE WE NEED TO MAKE iospaslib, BUT
 NOT KNOWING HOW TO DO THAT, COPY A PREVIOUS VERSION OF IT:}
$WRITELN 'WARNING: IOSPASLIB not re-generated, but copied from BUILD/'
F{ilemgr}C{opy}build/iospaslib.obj,object/iospaslib.obj

{    *** WORKAROUND FOLLOWS ***
 HERE IS WHERE WE NEED TO MAKE intrinsic.lib, BUT
 NOT KNOWING HOW TO DO THAT, COPY A PREVIOUS VERSION OF IT:}
$WRITELN 'WARNING: INTRINSIC.LIB not re-generated, but copied from BUILD/'
Y{es, replace it}C{opy}build/intrinsic.lib,object/intrinsic.lib
Y{es, replace it}Q{uit}

{    **** BEGIN SKIPPED SECTION
xiumanager
build:intrinsic
intrinsic
i1
i2
q
xiulinker
+i
object:oiupaslib
object:blkiointr
object:blockio
object:pasheap
object:sospasiolib
object:sospaslib


iospaslib
xiumanager


i3
q
     ***** END OF SKIPPED SECTION}

{switch back to OS paslib generation mode, just in case someone fiddles
 with osinpaslib components, without doing a full auxgen:}
F{ilemgr}C{opy}build/osdefs.text,source/paslibdefs.text
YQ

{compile/link all other programs}

{WARNING: build/linkdevc is NOT yet passed as a linked list for the following
 make, because the linker won't accept option input from exec files yet.}
$WRITELN 'WARNING: build of devcontrol doesnt have the +s option in the linklist'
$SUBMIT build/make(source/devcontrol,object/devcontrol)

$SUBMIT build/make(source/movesoroc,object/movesoroc)
$SUBMIT build/make(source/fsconvert,object/fsconvert)
$SUBMIT build/make(source/osconfig,object/osconfig)
$SUBMIT build/make(source/nwshell,object/system.shell,build/linkshell)

$ENDEXEC
ÿ